# 1.1 인터넷이란?

- 전 세계적으로 수십억 개의 컴퓨팅 장치를 연결하는 컴퓨터 네트워크

## 1.1.1 구성요소로 본 인터넷

- 인터넷을 구성하는 기본적인 HW, SW 구성요소로 기술하기
- 오늘날엔 TV, 가전제품, 자동차, 교통통제시스템 등과 같은 ‘사물들’(장치)이 인터넷에 연결되고 있는 중임
- 이러한 장치는 인터넷 용어로 호스트(**host**) 또는 종단 시스템(**end system**)이라고 부름.
- 종단 시스템은 통신 링크와 패킷 스위치의 네트워크로 연결됨.
    - 통신 링크: 네트워크 상에서 **통신 링크**란 일반적으로 두 개 이상의 통신 매체가 데이터 전송을 위해 사용하는 여러 종류의 정보 전송 경로를 말한다.
    - 패킷 스위치: 입력 통신 링크의 하나로 도착하는 패킷을 받아 출력 통신 링크의 하나로 패킷을 전달한다. 종류로는 **라우터(router)**와 **링크 계층 스위치(link-layer switch)**가 있음
- 패킷
    - 송신 종단 시스템이 전송할 데이터를 **세그먼트(segment)** 단위로 나눔 → 각 세그먼트에 헤어(header)를 붙임. ← 이것이 바로 패킷
    - 목적지에서 원래의 데이터로 조립된다.
- ISP
    - 인터넷 서비스 제공자
    - ex) KT, LG U+, SK 브로드밴드
    - 하위 계층 ISP는 국가 그리고 국제 상위 계층 ISP를 통해 서로 연결한다.

## 1.1.2 서비스 측면에서 본 인터넷

- 온라인 소셜 미디어, 멀티 게임 등은 서로 데이터를 교환하는 많은 종단 시스템을 포함한 분산 애플리케이션
- 인터넷 애플리케이션은 종단 시스템에서 수행
- 따라서 서로에게 데이터를 송신할 필요가 있음
- 애플리케이션을 위한 플랫폼으로서 인터넷을 기술한다.
- 소켓 인터페이스
    - 송신 프로그램이 따라야 하는 규칙의 집합

## 1.1.3 프로토콜이란?

- 어떤 일을 수행하려면 둘 이상의 통신 개체(entity)가 함께 인식하는 프로토콜이 필요함
- 둘 이상의 통신 개체 간에 교환되는 메시지 포맷과 순서뿐만 아니라, 메시지의 송수신과 다른 이벤트에 따른 행동들을 정의한다.

# 1.2 네트워크의 가장자리

- 참고자료
    
    [1장 - 컴퓨터 네트워크와 인터넷](https://velog.io/@cadenzah/computer-network-top-down-approach-01#121-access-network접속-네트워크)
    
    LAN이란 'Local Area Network'의 약자로 Local, 즉 '어느 한정된 공간에서 네트워크를 구성한다는 것'입니다.
    
    LAN 과 비교되는 말로 WAN이 있습니다. WAN은 'Wide Area Network'의 약자로서 '멀리 떨어진 지역을 연결하는 경우'에 사용합니다.
    
    그럼 이더넷(Ethernet)은 또 뭘까요???
    
    이더넷은 네트워킹의 한 방식이라고 생각하면 됩니다. 즉 네트워크를 만드는 방법 중 하나라고 생각하면 됩니다. 이더넷은 LAN(근거리 통신망) 구축을 위해 장치를 연결하는 데 널리 사용되는 네트워킹 프로토콜로, 장치가 네트워크를 통해 데이터 패킷을 다른 장치와 교환하여 통신하도록 지원합니다.
    
    **[출처]** [이더넷이란? (LAN, WAN, Ethernet, CSMA/CD)](https://blog.naver.com/haeri056/220805367585)|**작성자** [haeri056](https://blog.naver.com/haeri056)
    
- 종단 시스템(=호스트)
    - 웹 브라우저 프로그램, 웹 서버 프로그램, 전자메일 클라이언트 프로그램 또는 전자메일 서버 프로그램 같은 애플리케이션을 수행하므로 호스트(host)라고도 부른다.

## 1.2.1 접속 네트워크

- 종단 시스템을 그 종단 시스템으로부터 멀리 있는 다른 종단 시스템까지의 경로상에 있는 첫 번째 라우터에 연결하는 네트워크
- 가정 접속 유형
    - DSL
        - 지역 전화 회사로부터 인터넷 접속 서비스를 받는 것
        - 기존의 전화 회선 사용
        - 데이터와 전통적인 전화 신호를 동시에 전달하며 이들은 다른 주파수 대역에서 인코딩된다.
        - 꼬임쌍선 사용
    - 케이블
        - 케이블 TV 회사의 기존 케이블  TV 인프라스트럭처를 이용한다.
        - 광케이블, 동축케이블 사용. 그렇기 때문에 흔히 HFC(hybrid fiber coax)라고 부른다.
    - FTTH
        - 좀 더 빠른 속도를 제공하는 미래 기술
        - CO로부터 가정까지 직접 광섬유 경로를 제공
- 기업(그리고 가정) 접속: 이더넷과 와이파이
    - LAN
        - 여러 유형의 LAN 기술이 있지만 이더넷 기술이 기업, 대학, 홈 네트워크에서 가장 널리 사용되는 접속  기술
    - 이더넷
        - 꼬임쌍선 이용(이더넷 스위치에 연결하기 위함)
        - 이더넷 스위치 혹은 상호 연결된 스위치들의 네트워크는 다시 더 큰 인터넷으로 연결된다.
    - 무선 랜 환경
        - 사용자들은 기업 네트워크(대부분 유선 이더넷을 포함)에 연결된 AP로 패킷을 송/수신
        - AP는 유선 네트워크에 다시 연결된다.
- 광역 무선 접속: 3G와 LTE 4G와 5G
    - 안드로이드 장치 간 메시지 전달, 네트워크에서의 사진 공유 … 등은 이동 전화망 사업자들이 운영하는 기지국을 통해 패킷을 송수신하는 데 사용하는 사용하는 것과 같은 무선 인프라스트럭처를 채택하고 있다.
    - wifi와 달리 사용자는 기지국의 수십 킬로미터 반경 내에 잇으면 된다.

## 1.2.2 물리 매체

- HFC는 광섬유 케이블과 동축케이블은 병합해서 사용한다.
- DSL과 이더넷은 구리선을 사용
- 꼬임쌍선
    - 2개의 절연 구리선
- 동축케이블
    - 2개의 구리선
    - 두 구리선이 평행하지 않고 동심원 형태를 이루고 있다.
- 광섬유
    - 비트를 나타내는 빛의 파동을 전하는 가늘고 유연한 매체
    - 100km까지는 신호 감소 현상이 매우 적음.
- 지상 라디오 채널
    - 전자기 스펙트럼으로 신호 전달
- 위성 라디오 채널
    - 통신 위성은 지상 스테이션이라는 둘 이상의 지상 기반 마이크로파 송/수신기를 연결한다.
    - 정지 위성
        - 지구 위 일정 위치에 영원히 머무른다.
    - 저궤도 위성
        - 지구에 가깝게 위치하고 지구 상공 어느 한 곳에 고정되지 않는다.

# 1.3 네트워크 코어

## 1.3.1 패킷 교환

- 네트워크 애플리케이션에서 종단 시스템들은 서로 메시지를 교환함
- 송신 시스템은 긴 메시지를 패킷이라는 작은 덩어리로 분할
- 각 패킷은 통신 링크와 패킷 스위치(라우터와 링크 계층 스위치)를 거치게 된다.

### 저장-후-전달 전송

- 대부분의 패킷 스위치는 **저장-후-전달 전송(store-and-forward transmission)** 방식 이용
- 패킷 스위치가 R비트/초 속도, L비트의 패킷을 송신한다면
    - 패킷을 전송하는데 걸리는 시간 = L/R초
- 출발지로부터 목적지 노드까지 N개의 링크로 구성, 각각은 전송률이 R인 경우 종단 간 지연
    
    $$
    d_{종단 간 지연} = N\frac{L}{R}
    
    $$
    

### 큐잉 지연과 패킷 손실

- 각 패킷 스위치는 접속된 여러 개의 링크를 가지고 있다.
- 각 링크에 대해 패킷 스위치는 출력 버퍼(=출력 큐)를 가짐. 여기에 송신하고자 하는 패킷을 저장
- 패킷이 링크로 전송되어야 하는데 해당 링크가 다른 패킷을 전송하고 있다면 도착하는 패킷은 출력 버퍼에서 대기해야 함
- 따라서 저장-후-전달 지연 + 큐잉 지연 발생
    - 버퍼의 공간은 유한. 따라서 도착하는 패킷이 버퍼가 전송을 위해 대기 중인 다른 패킷들로 꽉 차 있는 경우를 당할 수 있음.

### 포워딩 테이블과 라우팅 프로토콜

- 모든 종단 시스템은 IP 주소라고 하는 주소를 가짐
- 출발지는 패킷의 헤더에 목적지의 IP 주소를 포함함
- 패킷이 라우터에 도착하면 라우터는 패킷의 목적지 주소 일부를 조사해 이웃 라우터로 전달
- 각 라우터는 목적지 주소(혹은 일부 주소)를 라우터의 출력 링크로 매핑하는 **포워딩 테이블**을 갖고 있다.
- 인터넷은 자동으로 포워딩 테이블을 설정하는데 이용되는 여러 특별한 **라우팅 프로토콜(routing protocol)**을 가진다.

## 1.3.2 회선 교환

- 송/수신자 간의 경로에 있는 스위치들이 연결 상태를 유지하는 것을 **회선(circuit)**이라고 함
- 그 연결이 이루어지는 동안 네트워크 링크에 일정한 전송률을 예약함
- 따라서 보장된 일정 전송률로 데이터를 보낼 수 있다.

### 회선 교환 네트워크에서의 다중화

- 주파수 분할 다중화(FDM)
    - 주파수 대역을 고정 제공(대역폭)
- 시분할 다중화(TDM)
    - 시간을 일정 주기의 프레임으로 구분하고 각 프레임은 고정된 수의 시간 슬롯으로 나뉜다.

## 1.3.3 네트워크의 네트워크

- 네트워크 구조1
    - 모든 접속 ISP를 하나의 글로벌 통과 ISP와 연결
- 네트워크 구조2
    - 수십만 개의 접속 ISP와 다중의 글로벌 ISP로 구성
    - 상위층에 글로벌 통과 서비스 제공자가 있고 하위층에 접속 ISP가 있는 2계층 구조
- 네트워크 구조3
    - 접속 ISP는 각 지역 ISP에 요금을 지불하고 연결
    - 각 지역 ISP는 자신이 연결하는 1계층 ISP에 요금 지불하고 연결
- 네트워크 구조4
    - **PoP**는 제공자의 네트워크 내에 있는 하나 혹은 그 이상의 라우터 그룹. 여기서 고객 ISP가 제공자 ISP에 연결 될 수 있다.
    - 고객 네트워크가 제공자의 PoP에 연결되기 위해 고객은 자신의 라우터 중 하나를 PoP에 있는 라우터에 직접 연결하도록 고속 링크를 제3자 통신 서비스 제공자로부터 임대할 수 있다.
    - (1계층 ISP를 제외한)모든 ISP는 **멀티홈**, 즉 둘 혹은 그 이상의 제공자 ISP에 연결하도록 선택할 수 있다.
    - 고객 ISP가 서비스 제공 ISP에게 지불하는 요금을 줄이기 위해 인터넷 계층구조의 같은 계층에 있는  가까운 ISP들은 피어링할 수 있다. 이렇게 되면 일반적으로 서로 요금을 지불하지 않는다.
    - 제3의 회사가 IXP를  구축할 수 있으며, 이는 다중의 ISP들이 서로 피어링할 수 있는 만남의 장소라고 할 수 있음
- 네트워크 구조5
    - 네트워크 구조4 위에 **콘텐츠 제공자 네트워크**를 추가함으로써 구축
    - 현재 구글이 이러한 콘텐츠 제공자 네트워크를 주도함
    - 구글 사설 네트워크는 하위 계층 SP들과 연결하여 인터넷 상위 계층을 ‘우회(bypass)’하고 있음.

# 1.4 패킷 교환 네트워크에서의 지연, 손실과 처리율

## 1.4.1 패킷 교환 네트워크에서의 지연 개요

- 노드 처리 지연
- 큐잉 지연
- 전송 지연
- 전파 지연
- 이러한 지연들이 쌓여 → 전체 노드 지연

### 처리 지연

- 패킷 헤더를 조사하고 그 패킷을 어디로 보낼지 결정하는 시간

### 큐잉 지연

- 패킷은 큐에서 링크로 전송되기를 기다리면서 큐잉 지연을 겪는다.
- 큐가 비어있고 다른 패킷이 전송 중인 상태가 아니라면 큐잉 지연은 0
- 트래픽이 많고 다른 많은 패킷이 전송 대기 중이면 큐잉 지연은 매우 길어짐

### 전송 지연

- 패킷의 모든 비트를 링크로 밀어내는 데(또는 전송하는 데) 필요한 시간
- 라우터가 패킷을 내보내는 데 필요한 시간으로, 두 라우터 사이의 거리와 상관이 없다.

### 전파 지연

- 링크의 처음부터 라우터 B까지의 전파에 필요한 시간
- 패킷이 한 라우터에서 다른 라우터까지 이동하는 데 필요한 시간

## 1.4.2 큐잉 지연과 패킷 손실

- a: 패킷이 큐에 도착하는 평균율
- R: 전송률
- L: 모든 패킷은 L비트라 가정
- 트래픽 강도: La/R
- 트래픽 공학의 주요 규칙: 트래픽 강도가 1보다 크지 않게 시스템을 설계하라
- 큐에 도착하는 프로세스는 랜덤
- 트래픽 강도가 1에 접근할수록 평균 큐잉 지연이 급속히 증가함

### 패킷 손실

- 큐의 용량은 일반적으로 유한 용량
- 패킷을 저장할 수 없는 경우에 라우터는 그 패킷을 버린다. 즉 패킷을 잃어버린다.
- 노드에서의 성능은 흔히 지연뿐만 아니라 패킷 손실 확률로도 측정한다.
- 손실 패킷은 모든 데이터가 궁극적으로 출발지에서 목적지까지 전달되었음을 보장하기 위해 종단 간 재전송될 수 있다.

## 1.4.3 종단 간 지연

- 출발지에서 목적지까지의 지연을 간략하게 논의한다.

### Traceroute

- N개의 특별 패킷을 보내는데 각각은 최종 목적지의 주소를 갖고 있다.
- n번째 라우터가 n으로 표시된 n번째 패킷을 받으면 라우터는 그 패킷을 목적지까지 전송하지 않고 패킷 파기, 출발지에 역으로 메시지를 보낸다.
- 출발지는 경과 시간을 기록, 또한 메시지를 보내온 라우터(혹은 목적지 호스트) 이름과 주소도 기록한다.
- Traceroute는 이를 3번 반복한다.
- 큐잉 지연은 시간에 따라 변화함. 따라서 n번 라우터로 보내진 패킷 n의 왕복 지연은 n+1번 라우터로 보내진 패킷 n+1의 왕복 지연보다 길 수 있다.

## 1.5 프로토콜 계층과 서비스 모델

### 1.5.1 계층구조

| 애플리케이션 | 패킷: 메시지(message)
한 종단 시스템에 있는 애플리케이션이 다른 종단 시스템에 있는 애플리케이션과 정보 패킷을 교환하는 데 사용하는 프로토콜  |
| --- | --- |
| 트랜스포트 | 패킷: 세그먼트(segment) TCP: 긴 메시지를 짧은 메시지로 나누고 혼잡 제어 기능을 제공하여 네트워크가 혼잡할 때 출발지의 전송률을 줄이게 한다. UDP: 애플리케이션에 비연결형 서비스를 제공한다. |
| 네트워크 | 패킷: 데이터그램(datagram) IP 데이터그램의 필드를 정의하며 종단 시스템과 라우터가 이 필드에 어떻게 동작하는지를 정의. 출발지와 목적지 사이에서 데이터그램이 이동하는 경로를 결정하는 라우팅 프로토콜을 포함 |
| 링크 | 패킷: 프레임(frame) 경로상의 각기 다른 링크에서 다른 링크 계층 프로토콜에 의해 처리될 수 있다. |
| 물리 | 링크의 실제 전송 매체(ex) 꼬임쌍선, 단일 모드 광케이블)에 의존한다. |

## 1.5.2 캡슐화

- 링크 계층 스위치는 1, 2계층을 구현하고 라우터는 1~3계층을 구현한다.

| 애플리케이션 | 트랜스포트 | 네트워크 | 링크 | 물리 |
| --- | --- | --- | --- | --- |
|  | 적절한 애플리케이션으로 보내도록 하는 정보와 메시지의 비트들이 변경되었는지 수신자가 결정하게 하는 오류 검출 비트를 포함한다. | 출발지와 목적지 종단 시스템 주소와 동일한 헤더 정보를 추가 | 자신의 헤더 정보 추가 |  |
- 각 계층에서 패킷은 **헤더 필드**와 **페이로드 필드**라는 두 가지 형태의 필드를 갖는다.
- 페이로드는 일반적으로 그 계층 상위로부터의 패킷이다.

# 1.6 공격받는 네트워크

### 나쁜 친구들은 인터넷을 통해 여러분의 호스트에 멀웨어(악성코드)를 침투시킬 수 있다.

- 멀웨어는 **자기복제(self-replicating)**를 한다.
- 일단 한 호스트에 영향을 미치면, 그 호스트에서 인터넷을 통해 다른 호스트로의 엔트리를 찾는다.
- 그런 후 새롭게 영향을 받은 호스트로부터 또 다른 많은 호스트로의 엔트리를 찾는다.
- 이러한 방법으로 자기복제 멀웨어는 빠르게 기하급수적으로 퍼질 수 있다.

### 나쁜 친구들은 서버와 네트워크 인프라스트럭처를 공격할 수 있다.

- **DoS(denial-of-service) 공격**
- 네트워크, 호스트 혹은 다른 인프라스트럭처의 요소들을 정상적인 사용자가 사용할 수 없게 하는 것이다.
    - 취약성 공격: 애플리케이션 혹은 운영체제에 교묘한 메시지를 보내는 것을 포함
        - 만약 올바른 순서의 패킷을 공격받기 쉬운 애플리케이션 혹은 운영체제에 보내면 그 서비스는 중단되거나 호스트가 동작을 멈출 수 있다.
    - 대역폭 플러팅: 목표 호스트로 수많은 패킷을 보낸다.
        - 정당한 패킷들이 그 서버에 도달하지 못하게 한다.
    - 연결 플러딩: 가짜 연결을 처리하느라 바빠서 정상적인 연결을 받아들이는 것을 중단하게 된다.

### 나쁜 친구들은 패킷을 탐지할 수 있다.

- **패킷 스니퍼(packet sniffer)**
    - 패킷 스니퍼는 LAN상으로 보내는 모든 패킷의 사본을 얻을 수 있다.
    - 패킷 스니핑을 방지하기 위한 가장 좋은 방어는 암호화를 포함하는 것이다.

### 나쁜 친구들은 여러분이 신뢰하는 사람인 것처럼 위장할 수 있다.

- **IP 스푸핑(spoofing)**
    - 가짜 출발지 주소를 가진 패킷을 인터넷으로 보내는 능력
    - 한 사용자가 다른 사용자인 것처럼 행동하는 여러 가지 방법 중 하나
    - 문제해결을 위해서는 **종단 인증(end-point authentication)**, 즉 메시지가 실제로 와야 할 곳으로부터 온 것인지 확신할 수 있는 방법이 필요하다.

### 인터넷이 처음에 어떻게 보안 문제에 직면하게 되었는가?

- 인터넷은 원래 ‘투명한 네트워크에 연결된 상호 신뢰할 수 있는 사용자 그룹’ 모델(보안이 필요 없는 모델)에 기반을 둔 방식으로 설계되었기 때문
- 그러나 오늘날 인터넷은 ‘상호 신뢰하는 사용자’를 분명히 포함하지 않는다.
